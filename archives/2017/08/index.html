<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>๑Charles✦ˑ̫✦Vincent๑</title><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name="format-detection" content="telephone=no"><meta name="author" content="๑Charles✦ˑ̫✦Vincent๑"><meta name="designer" content="minfive"><meta name="keywords" content="null"><meta name="description" content="嘿嘿(๑乛◡乛๑),但这也是无可奈何的事情，毕竟世上不可能有那么多十全十美的好事，做人在某些时候总是要有些取舍的。"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=yes"><meta name="mobile-web-app-capable" content="yes"><meta name="robots" content="all"><link rel="canonical" href="http://zhoujinjian.cc/archives/2017/08/index.html"><link rel="icon" type="image/png" href="null" sizes="32x32"><link rel="stylesheet" href="/scss/base/index.css"><link rel="alternate" href="/atom.xml" title="๑Charles✦ˑ̫✦Vincent๑"><link rel="stylesheet" href="/scss/views/page/archive.css"></head><body ontouchstart><div id="page-loading" class="page page-loading" style="background-image:url(/img/loading-large.gif)"></div><header class="page__small-header page__header--small"><nav class="page__navbar"><div class="page__container navbar-container"><a class="page__logo" href="/" title="๑Charles✦ˑ̫✦Vincent๑" alt="๑Charles✦ˑ̫✦Vincent๑"><img src="/img/Logo.png" alt="๑Charles✦ˑ̫✦Vincent๑"></a><nav class="page__nav"><ul class="nav__list clearfix"><li class="nav__item"><a href="/" alt="Home" title="Home">Home</a></li><li class="nav__item"><a href="/archives" alt="Archive" title="Archive">Archive</a></li><li class="nav__item"><a href="/about" alt="About" title="About">About</a></li></ul></nav><button class="page__menu-btn" type="button"><i class="iconfont icon-menu"></i></button></div></nav></header><script type="text/javascript" src="js/libs/anime.js"></script><script type="text/javascript" src="js/libs/anime.min.js"></script><canvas class="fireworks"></canvas><section><svg class="logo" width="0" height="0" viewBox="0 0 0 0"><defs><radialGradient cx="50%" cy="0%" fx="50%" fy="0%" r="50%" id="radialGradient-1"><stop stop-color="#329FFF" offset="0%"></stop><stop stop-color="#206EFF" offset="100%"></stop></radialGradient><radialGradient cx="50%" cy="0%" fx="50%" fy="0%" r="50%" id="radialGradient-2"><stop stop-color="#FF7894" offset="0%"></stop><stop stop-color="#FF324A" offset="100%"></stop></radialGradient><radialGradient cx="50%" cy="0%" fx="50%" fy="0%" r="100%" id="radialGradient-3"><stop stop-color="#FF7894" offset="0%"></stop><stop stop-color="#FF324A" offset="100%"></stop></radialGradient><radialGradient cx="50%" cy="0%" fx="50%" fy="0%" r="100%" id="radialGradient-4"><stop stop-color="#359FFC" offset="0%"></stop><stop stop-color="#206EFF" offset="100%"></stop></radialGradient><radialGradient cx="50%" cy="0%" fx="50%" fy="0%" r="50%" id="radialGradient-5"><stop stop-color="#5FFFD2" offset="0%"></stop><stop stop-color="#31FFA6" offset="100%"></stop></radialGradient></defs><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><rect id="dot-js" fill="#FFFFFF" x="80" y="352" width="32" height="32" rx="16"></rect><g id="lines" transform="translate(128.000000, 256.000000)"><path d="M531.599976,119.042822 C531.872599,121.442657 532.736164,123.612749 534.213875,124.965578 C535.547208,126.186231 537.324986,127 539.587612,127 C542.133067,127 544.032057,126.104854 545.36539,124.680759 C546.739127,123.175287 547.506804,120.978112 547.506804,118.374052 L547.506804,97" id="line-s" stroke="#FDFDFD" stroke-linecap="square"></path><path d="M576.512399,105.204082 C576.353483,103.122449 575.558903,101.612245 574.367034,100.183673 C572.777876,98.2653061 569.758474,97 566.739073,97 C564.116961,97 561.534578,97.8979592 559.786504,99.5306122 C558.356261,100.877551 557.323308,102.591837 557.323308,105 C557.323308,108.410588 560.43582,110.318694 563,110.738061 C566,111.228706 568.5,111.228706 572,112.209996 C574.445972,112.89577 577.108333,115.626631 577.108333,118.632653 C577.108333,121.163265 576.194567,122.836735 574.883511,124.183673 C572.976521,126.102041 570.155764,127 566.897989,127 C563.679942,127 560.898915,125.938776 559.031653,123.897959 C557.641139,122.387755 556.687644,120.346939 556.488999,118.142857" id="line-j" stroke="#FDFDFD"></path><path d="M48,112 C21.490332,112 0,90.509668 0,64 C0,37.490332 21.490332,16 48,16 C74.509668,16 96,37.490332 96,64 L96,128" id="line-a" stroke="#206EFF" stroke-width="32"></path><path d="M96,0 L96,128 L96,64 C96,37.490332 117.490332,16 144,16 C170.509668,16 192,37.490332 192,64 L192,128" id="line-n-1" stroke="#FF324A" stroke-width="32"></path><path d="M224,0 L224,128 L224,64 C224,37.490332 245.490332,16 272,16 C298.509668,16 320,37.490332 320,64 L320,128" id="line-m-1" stroke="#206EFF" stroke-width="32"></path><path d="M320,128 L320,64 C320,37.490332 341.490332,16 368,16 C394.509668,16 416,37.490332 416,64 L416,128" id="line-m-2" stroke="#FF324A" stroke-width="32"></path><path d="M192,48 L192,64 C192,90.509668 213.490332,112 240,112" id="line-i-1" stroke="#31FFA6" stroke-width="32"></path><path d="M464,80 L512,80 L512,64 C512,37.490332 490.509668,16 464,16 C437.490332,16 416,37.490332 416,64 C416,90.509668 437.490332,112 464,112" id="line-e" stroke="#31FFA6" stroke-width="32"></path></g><g id="fills" transform="translate(112.000000, 256.000000)"><path d="M64,32 C46.326888,32 32,46.326888 32,64 C32,81.673112 46.326888,96 64,96 L64,128 C28.653776,128 0,99.346224 0,64 C0,28.653776 28.653776,0 64,0 C99.346224,0 128,28.653776 128,64 L128,128 L96,128 L96,64 C96,46.326888 81.673112,32 64,32 Z" id="fill-a" fill="url(#radialGradient-1)"></path><path d="M192,64 C192,46.326888 177.673112,32 160,32 C142.326888,32 128,46.326888 128,64 L128,128 L96,128 L96,64 C96,28.653776 124.653776,0 160,0 C195.346224,0 224,28.653776 224,64 L224,128 L192,128 L192,64" id="fill-n-2" fill="url(#radialGradient-2)"></path><rect id="fill-n-1" fill="url(#radialGradient-3)" x="96" y="0" width="32" height="128"></rect><path d="M256,64 C256,46.326888 270.326888,32 288,32 C305.673112,32 320,46.326888 320,64 L320,128 L352,128 L352,64 C352,28.653776 323.346224,0 288,0 C252.653776,0 224,28.653776 224,64 L256,64 L256,64 Z" id="fill-m-2" fill="url(#radialGradient-1)"></path><rect id="fill-m-1" fill="url(#radialGradient-4)" x="224" y="0" width="32" height="128"></rect><path d="M416,64 C416,46.326888 401.673112,32 384,32 C366.326888,32 352,46.326888 352,64 L352,128 L320,128 L320,64 C320,28.653776 348.653776,0 384,0 C419.346224,0 448,28.653776 448,64 L448,128 L416,128 L416,64" id="fill-m-3" fill="url(#radialGradient-2)"></path><path d="M224,64 C224,81.673112 238.326888,96 256,96 L256,128 C220.653776,128 192,99.346224 192,64 L192,48 L192,48 L224,48 L224,64" id="fill-i-1" fill="url(#radialGradient-5)"></path><circle id="dot-i" fill="url(#radialGradient-5)" cx="208" cy="16" r="16"></circle><path d="M512,64 C512,46.326888 497.673112,32 480,32 L480,32 C462.326888,32 448,46.326888 448,64 C448,81.673112 462.326888,96 480,96 L480,128 C444.653776,128 416,99.346224 416,64 C416,28.653776 444.653776,0 480,0 C515.346224,0 544,28.653776 544,64 L544,96 L512,96 L480,96 L480,64 L512,64" id="fill-e-1" fill="url(#radialGradient-5)"></path></g></g></svg></section><script>var iOS=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform),ff=0<navigator.userAgent.indexOf("Firefox"),tap="ontouchstart"in window||navigator.msMaxTouchPoints?"touchstart":"mousedown";iOS&&document.body.classList.add("iOS");var fireworks=function(){var u=function(){return parseFloat(getComputedStyle(document.documentElement).fontSize)},t=document.querySelector(".fireworks"),l=t.getContext("2d"),d=200,e=0,n=0,c=[],m=function(){t.width=document.body.scrollWidth,t.height=document.body.scrollHeight},f=["#FF324A","#31FFA6","#206EFF","#FFFF99"],g=function(t,a){var e={};return e.x=t,e.y=a,e.color=f[anime.random(0,f.length-1)],e.radius=anime.random(u(),2*u()),e.draw=function(){l.beginPath(),l.arc(e.x,e.y,e.radius,0,2*Math.PI,!0),l.fillStyle=e.color,l.fill()},e},h=function(t){var a=c.indexOf(t);-1<a&&c.splice(a,1)},o=function(t,a){m();var e,n,o=function(t,a){for(var e=[],n=0;n<24;n++){var o=g(t,a);e.push(o)}return e}(t,a),r=(e=a,(n={}).x=t,n.y=e,n.color=f[anime.random(0,f.length-1)],n.color="#FFF",n.radius=0,n.alpha=1,n.lineWidth=6,n.draw=function(){l.globalAlpha=n.alpha,l.beginPath(),l.arc(n.x,n.y,n.radius,0,2*Math.PI,!0),l.lineWidth=n.lineWidth,l.strokeStyle=n.color,l.stroke(),l.globalAlpha=1},n),i=anime({targets:o,x:function(t){return t.x+anime.random(-d,d)},y:function(t){return t.y+anime.random(-d,d)},radius:0,duration:function(){return anime.random(1200,1800)},easing:"easeOutExpo",complete:h}),s=anime({targets:r,radius:function(){return anime.random(4.75*u(),11.25*u())},lineWidth:0,alpha:{value:0,easing:"linear",duration:function(){return anime.random(400,600)}},duration:function(){return anime.random(1200,1800)},easing:"easeOutExpo",complete:h});c.push(i),c.push(s)};anime({duration:1/0,update:function(){l.clearRect(0,0,t.width,t.height),c.forEach(function(t){t.animatables.forEach(function(t){t.target.draw()})})}});return document.addEventListener(tap,function(t){var a;e=(a=t).clientX||a.touches[0].clientX,n=a.clientY||a.touches[0].clientY,o(e,n),ga("send","event","fireworks","Click")},!1),window.addEventListener("resize",m,!1),{boom:o}}(),logoAnimation=function(){document.body.classList.add("ready");var t=function(t){var a=t.getTotalLength();return t.setAttribute("stroke-dasharray",a),[a,0]},a=anime({targets:"#lines path",strokeDashoffset:{value:t,duration:700,easing:"easeOutQuad"},transform:["translate(0 128)","translate(0 0)"],delay:function(t,a){return 750+120*a},duration:1400}),n=(anime({targets:"#dot-js",transform:["translate(0 0)","translate(544 0)"],delay:a.duration-800,duration:800,elasticity:300}),anime({targets:"#dot-js",transform:["translate(0 -304)","translate(0 0)"],duration:500,elasticity:600,autoplay:!1})),i=(anime({targets:"#dot-js",transform:["translate(0 0) scale(1 3)","translate(0 -352) scale(1 1)"],duration:800,easing:"easeOutCirc",complete:n.play}),anime({duration:880,complete:function(t){var a=n.animatables[0].target.getBoundingClientRect(),e={x:a.left+a.width/2,y:a.top+a.height/2};fireworks.boom(e.x,e.y)}}),anime({targets:"#line-i-1",strokeDashoffset:{value:t,duration:700,easing:"easeOutQuad"},transform:function(){return ff?["rotate(360)","rotate(0)"]:["rotate(360 240 64)","rotate(0 240 64)"]},duration:2500,delay:a.duration-780}));anime({targets:"#dot-i",transform:["translate(0 -352) scale(1 3)","translate(0 0) scale(1 1)"],opacity:{value:[0,1],easing:"linear",duration:100},delay:a.duration+250}),anime({targets:["#line-j","#line-s"],strokeDashoffset:t,duration:1400,delay:function(t,a){return i.duration-1400+60*a},easing:"easeInOutQuart"}),anime({targets:"#fills *:not(#dot-i)",opacity:[0,1],delay:i.duration-300,delay:function(t,a,e){var n=e/2,o=n<a-n?0:a,r=Math.abs(o-n);return i.duration-1300+30*r},duration:500,easing:"linear"}),anime({targets:[".logo",".main",".links","footer"],opacity:{value:1,easing:"linear",duration:1e3},translateY:["1.5rem","0rem"],delay:function(t,a,e){return 100*(e-a)+(i.duration-600)},duration:2250,easing:"easeOutExpo"})};window.onload=logoAnimation,window.onscroll=function(){var t=document.querySelector(".fireworks"),a=document.documentElement.scrollTop||document.body.scrollTop;t.style.position="absolute",t.style.left=0,t.style.top=a}</script><div id="page" class="page js-hidden"><main class="page__container page__main"><div class="page__content"><nav class="mb-main__nav"><a class="nav__item" href="/archives/" alt="2018年">2018年 </a><a class="nav__item" href="/archives/2017/" alt="2017年">2017年 </a><a class="nav__item" href="/archives/2015/" alt="2015年">2015年</a></nav><div class="page__posts clearfix"><div class="page__post"><article itemscope itemtype="http://schema.org/Article" class="page__mini-article"><div class="mini-article__cover"><img itemprop="image" src="https://s19.postimg.org/h3kx28tfn/cover4.png" alt="Android 7.1.2 (Android N) Android消息处理机制分析（从JAVA层到NATIVE层）– Handler、Looper、Message"><div itemprop="datePublished" content="" class="mini-article__date"><span class="date__day">1</span> <span class="date__month">Aug</span></div><a itemprop="url" class="iconfont icon-enter" href="/2017/08/01/Android-7-1-2-Android-N-Android消息机制–Handler、Looper、Message/"></a></div><div class="mini-article__info"><h3 itemprop="name" class="mini-article__title"><a itemprop="url" href="/2017/08/01/Android-7-1-2-Android-N-Android消息机制–Handler、Looper、Message/" title="Android 7.1.2 (Android N) Android消息处理机制分析（从JAVA层到NATIVE层）– Handler、Looper、Message">Android 7.1.2 (Android N) Android消息处理机制分析（从JAVA层到NATIVE层）– Handler、Looper、Message</a></h3><p class="mini-article__author">by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a itemprop="url" href="http://zhoujinjian.cc/" target="_blank"><span itemprop="name">๑Charles✦ˑ̫✦Vincent๑.</span></a></span></p><p itemprop="articleSection" class="min-article__desc">Android消息处理机制概述： Android应用程序是通过消息来驱动的，系统为每一个应用程序维护一个消息队例，应用程序的主线程不断地从这个消息队例中获取消息（Looper），然后对这些消息进行处理（Handler），这样就实现了通过消息来驱动应用程序的执行，本文将详细分析Android应用程序的消息处理机制。<!-- more --></p><div class="min-article__tags"><i class="iconfont icon-tab"></i><ul class="tags__list clearfix"><li class="tags__item"><a href="/tags/Android/">Android</a></li></ul></div></div></article></div></div><nav class="page__paginator"><ul class="paginator__list clearfix"><li class="paginator__item"><span>1</span></li></ul></nav></div><aside class="page__sidebar"><form id="page-search-from" class="page__search-from" action="/search/"><label class="search-form__item"><input class="input" type="text" name="search" placeholder="Search..."> <i class="iconfont icon-search"></i></label></form><div class="sidebar__block"><h3 class="block__title">Introduction</h3><p class="block__text">嘿嘿(๑乛◡乛๑),但这也是无可奈何的事情，毕竟世上不可能有那么多十全十美的好事，做人在某些时候总是要有些取舍的。</p></div><div class="sidebar__block"><h3 class="block__title">Tags</h3><ul class="block-list tag-list clearfix"><li class="tag-item"><a class="tag-link" href="/tags/Android/">Android</a></li><li class="tag-item"><a class="tag-link" href="/tags/Hexo/">Hexo</a></li></ul></div><div class="sidebar__block"><h3 class="block__title">Categories</h3><ul class="block-list"><li class="block-list-item"><a class="block-list-link" href="/categories/Hexo/">Hexo</a><span class="block-list-count">1</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/Android/">Android</a><span class="block-list-count">9</span></li></ul></div><div class="sidebar__block"><h3 class="block__title">Latest Post</h3><ul class="block-list latest-post-list"><li class="latest-post-item"><a href="/2018/04/01/Linux内核（Kernel-3-18）-Input-子系统分析-i-wonder/" title="Linux内核（Kernel-3.18） - Linux Input 子系统分析 [i.wonder~]"><div class="item__cover"><img src="https://s19.postimg.org/9au9a90b7/cover2.png" alt="Linux内核（Kernel-3.18） - Linux Input 子系统分析 [i.wonder~]"></div><div class="item__info"><h3 class="item__title">Linux内核（Kernel-3.18） - Linux Input 子系统分析 [i.wonder~]</h3><span class="item__text">2018-04-01</span></div></a></li><li class="latest-post-item"><a href="/2018/03/01/Android-7-1-2-Android-N-Android-WindowManagerService-窗口管理服务分析-i-wonder/" title="Android 7.1.2 (Android N) Android WindowManagerService 窗口管理服务 分析 [i.wonder~]"><div class="item__cover"><img src="https://s19.postimg.org/qbd5iw31v/cover6.jpg" alt="Android 7.1.2 (Android N) Android WindowManagerService 窗口管理服务 分析 [i.wonder~]"></div><div class="item__info"><h3 class="item__title">Android 7.1.2 (Android N) Android WindowManagerService 窗口管理服务 分析 [i.wonder~]</h3><span class="item__text">2018-03-01</span></div></a></li><li class="latest-post-item"><a href="/2018/02/01/Android-7-1-2-Android-N-Android-Graphics-系统分析/" title="Android 7.1.2 (Android N) Android Graphics 系统 分析 [i.wonder~]"><div class="item__cover"><img src="https://s19.postimg.org/4c6qvoehv/cover7.png" alt="Android 7.1.2 (Android N) Android Graphics 系统 分析 [i.wonder~]"></div><div class="item__info"><h3 class="item__title">Android 7.1.2 (Android N) Android Graphics 系统 分析 [i.wonder~]</h3><span class="item__text">2018-02-01</span></div></a></li><li class="latest-post-item"><a href="/2018/01/01/Android-7-1-2-Android-N-Android-Binder系统分析/" title="Android 7.1.2 (Android N) Android Binder 系统 分析"><div class="item__cover"><img src="https://s19.postimg.org/j85a39agz/cover8.jpg" alt="Android 7.1.2 (Android N) Android Binder 系统 分析"></div><div class="item__info"><h3 class="item__title">Android 7.1.2 (Android N) Android Binder 系统 分析</h3><span class="item__text">2018-01-01</span></div></a></li></ul></div></aside></main><footer class="page__footer"><section class="footer__top"><div class="page__container footer__container"><div class="footer-top__item footer-top__item--2"><h3 class="item__title">About</h3><div class="item__content"><p class="item__text">开始的开始亦是结束•结束的结束亦是开始</p><ul class="footer__contact-info"><li class="contact-info__item"><i class="iconfont icon-address"></i> <span>Room 103, Building 5, No. 5 Huitai Road, Shouxin Building, Chaoyang District, Beijing, China</span></li><li class="contact-info__item"><i class="iconfont icon-email2"></i> <span>zhou.jinjian@qq.com</span></li></ul></div></div><div class="footer-top__item footer__image"><img src="https://s19.postimg.org/l6oufd5cj/Dream_Works_2016_Stacked-_MI-512x512.png" alt="logo" title="๑Charles✦ˑ̫✦Vincent๑"></div><div class="footer-top__item"><h3 class="item__title">Friend Links</h3><div class="item__content"><ul class="footer-top__list"><li class="list-item"><a href="https://keyin.me/" title="World of Forks" target="_blank">World of Forks</a></li><li class="list-item"><a href="https://molunerfinn.com/" title="MARKSZのBlog" target="_blank">MARKSZのBlog</a></li><li class="list-item"><a href="https://github.com/Mrminfive/hexo-theme-skapp" title="Hexo-theme-skapp" target="_blank">Hexo-theme-skapp</a></li><li class="list-item"><a href="http://vffv.zhoujinjian.cc/" title="๑Charles✦ˑ̫✦Vincent๑" target="_blank">๑Charles✦ˑ̫✦Vincent๑</a></li></ul></div></div><div class="footer-top__item"><h3 class="item__title">Build Tools</h3><div class="item__content"><ul class="footer-top__list"><li class="list-item"><a href="https://hexo.io/" title="Blog Framework" target="_blank">Hexo</a></li><li class="list-item"><a href="https://dribbble.com/" title="Dribbble" target="_blank">Dribbble</a></li><li class="list-item"><a href="https://pages.github.com/" title="Blog Framework" target="_blank">Github-Pages</a></li></ul></div></div></div></section><section class="footer__bottom"><div class="page__container footer__container"><p class="footer__copyright">Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>, Made by <a href="https://github.com/izhoujinjian" target="_blank">๑Charles✦ˑ̫✦Vincent๑</a>.</p><ul class="footer__social-network clearfix"><li class="social-network__item"><a href="https://github.com/izhoujinjian" target="_blank" title="github"><i class="iconfont icon-github"></i></a></li><li class="social-network__item"><a href="mailto:zhou.jinjian@qq.com" target="_blank" title="email"><i class="iconfont icon-email"></i></a></li></ul></div></section></footer><div id="back-top" class="back-top back-top--hidden js-hidden"><i class="iconfont icon-top"></i></div></div><script src="/js/common.js"></script></body></html>